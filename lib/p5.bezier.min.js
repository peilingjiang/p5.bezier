/*! For license information please see p5.bezier.min.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.p5bezier=e():t.p5bezier=e()}(this,(()=>(()=>{"use strict";var t={d:(e,n)=>{for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{draw:()=>P,init:()=>L,new:()=>S});var n=function(t,e,n){if(n||2===arguments.length)for(var i,o=0,r=e.length;o<r;o++)!i&&o in e||(i||(i=Array.prototype.slice.call(e,0,o)),i[o]=e[o]);return t.concat(i||Array.prototype.slice.call(e))};window.console.log("[p5.bezier] 2024");var i,o,r,s,h,p,a,l,c={0:.2,1:.1,2:.05,3:.04,4:.02,5:.01,6:.008,7:.002,8:.001,9:5e-4,10:1e-4},d=[1],u={};function f(t,e){return"WebGLRenderingContext"===t.constructor.name||e?3:2}function v(t){for(var e=d.length;e<=t;e++)d[e]=e*d[e-1]}function y(t){return d[t]}function b(t,e){return 0===e||e===t?1:(u[t]||(u[t]={}),void 0!==u[t][e]||(u[t][e]=function(t,e){return y(t)/(y(e)*y(t-e))}(t,e)),u[t][e])}function x(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 4===t.length?Math.hypot(t[0]-t[2],t[1]-t[3]):6===t.length?Math.hypot(t[0]-t[3],t[1]-t[4],t[2]-t[5]):0}function g(){i._doFill&&o.fill(),i._doStroke&&o.stroke()}function m(t){return t.map((function(t){return n([],t,!0)}))}function w(t){var e=t[0],n=t[t.length-1],i=t[1],o=t[t.length-2];return[[2*n[0]-o[0],2*n[1]-o[1]],[2*e[0]-i[0],2*e[1]-i[1]],e]}function L(t){if(o=(i=t).drawingContext,"undefined"!=typeof p5&&t instanceof p5.Graphics)s=!0,r=f(o,!1);else{if(!("undefined"!=typeof p5&&t instanceof p5.Renderer||t.drawingContext))throw new Error("[p5.bezier] Canvas is not supported.");s=!1,"undefined"!=typeof p5&&("undefined"==typeof p5||t instanceof p5.Renderer)||window.console.warn("[p5.bezier] Support beyond p5.js is not tested"),r=f(o,t.isP3D)}!function(t,e,n){t?(h=e.beginShape,p=e.vertex,a=e.vertex,l=e.endShape):n instanceof WebGLRenderingContext?(h=function(){},p=function(t,e,i){return void 0===i&&(i=0),n.vertexAttrib3f(0,t,e,i)},a=function(t,e,i){return void 0===i&&(i=0),n.vertexAttrib3f(0,t,e,i)},l=function(){}):(h=n.beginPath.bind(n),p=n.moveTo.bind(n),a=n.lineTo.bind(n),l=n.closePath.bind(n))}(s,i,o)}function P(t,e,n){void 0===e&&(e="OPEN"),void 0===n&&(n=7);var i=m(t);if("CLOSE"===e){var o=w(i);i.push.apply(i,o)}var d=c[n],u=i.length-1;if(v(u),h(),p.apply(void 0,i[0]),2===r){var f=void 0,y=void 0,x=void 0;for(x=0;x<=1;x+=d){f=y=0;for(var L=0;L<=u;L++){f+=(S=b(u,L)*Math.pow(1-x,u-L)*Math.pow(x,L))*i[L][0],y+=S*i[L][1]}a(f,y)}}else if(3===r)for(x=0;x<=1;x+=d){var P=[0,0,0];for(L=0;L<=u;L++)for(var S=b(u,L)*Math.pow(1-x,u-L)*Math.pow(x,L),O=0;O<3;O++)P[O]+=S*i[L][O];a.apply(void 0,P)}a.apply(void 0,i[i.length-1]),s?l(e):"CLOSE"===e&&l(),g()}function S(t,e,n){void 0===e&&(e="OPEN"),void 0===n&&(n=7);var i=c[n];return new O(t,e,i,r)}v(10);var O=function(){function t(t,e,i,o,r){var s;void 0===r&&(r=null),this.controlPoints=m(t),"CLOSE"===e?((s=this.controlPoints).push.apply(s,w(this.controlPoints)),this.closeType="CLOSE"):this.closeType="OPEN",this.dimension=o,this.increment=i,this.vertexList=[],this.p=this.controlPoints.length,this.n=this.p-1,v(this.n),null===r?this._buildVertexList():this.vertexList=n([],r,!0)}return t.prototype._buildVertexList=function(){if(this.vertexList=[],2===this.dimension)for(var t=0;t<=1;t+=this.increment){for(var e=0,n=0,i=0;i<=this.n;i++){e+=(r=b(this.n,i)*Math.pow(1-t,this.n-i)*Math.pow(t,i))*this.controlPoints[i][0],n+=r*this.controlPoints[i][1]}this.vertexList.push([e,n])}else if(3===this.dimension)for(t=0;t<=1;t+=this.increment){var o=[0,0,0];for(i=0;i<=this.n;i++)for(var r=b(this.n,i)*Math.pow(1-t,this.n-i)*Math.pow(t,i),s=0;s<3;s++)o[s]+=r*this.controlPoints[i][s];this.vertexList.push(o)}return this._addVertex(this.controlPoints[this.controlPoints.length-1]),this.dimension=this.vertexList[0].length,this.vertexList},t.prototype._addVertex=function(t){a.apply(void 0,t)},t.prototype._distVertex=function(t,e){return 3===this.dimension&&3===t.length&&3===e.length?x(t[0],t[1],t[2],e[0],e[1],e[2]):2===this.dimension?x(t[0],t[1],e[0],e[1]):0},t.prototype.draw=function(t){var e,n,i,r=this;if(t){this.increment>.008&&(this.increment=.008,window.console.warn("[p5.bezier] Accuracy is changed to 6 for a dash curve"));var c=Math.abs(t[0]),d=Math.abs(t[1]),u=!0,f=this.vertexList[0],v=1,y=this.vertexList[v],b=f,x=0,m=u?c:d;for(o.save(),o.fillStyle="rgba(0, 0, 0, 0)",h(),p.apply(void 0,f);v<this.vertexList.length;){for(y=this.vertexList[v],x=this._distVertex(f,y);x>=m;)n=y,i=m/x,b=2===(e=b).length&&2===n.length?[e[0]+(n[0]-e[0])*i,e[1]+(n[1]-e[1])*i]:3===e.length&&3===n.length?[e[0]+(n[0]-e[0])*i,e[1]+(n[1]-e[1])*i,e[2]+(n[2]-e[2])*i]:n,u?a.apply(void 0,b):p.apply(void 0,b),x-=m,m=(u=!u)?c:d;u?a.apply(void 0,y):p.apply(void 0,y),m-=this._distVertex(b,y),b=f=y,v++}g(),o.restore()}else h(),this.vertexList.map((function(t){return r._addVertex(t)})),"CLOSE"===this.closeType&&o.closePath(),s?l(this.closeType):"CLOSE"===this.closeType&&l(),g()},t.prototype.update=function(t){if(t.length!==this.controlPoints.length)throw new Error("[p5.bezier] The number of control points changed.");this.controlPoints.every((function(e,n){return e===t[n]}))||(this.controlPoints=t,this._buildVertexList())},t.prototype.move=function(e,n,i,o,r){if(void 0===i&&(i=null),void 0===o&&(o=!0),null===i&&3===this.dimension)throw new Error("[p5.bezier] X, Y, and Z are needed to move a 3D curve.");var s=[e,n];null!==i&&s.push(i);var h=this.vertexList.map((function(t){return t.slice()})),p=new t(this.controlPoints,this.closeType,this.increment,this.dimension,h);return p.vertexList=p.vertexList.map((function(t){return t.map((function(t,e){return t+s[e]}))})),o&&p.draw(r),p},t.prototype.shortest=function(t,e,i){var o=this;void 0===i&&(i=0);var r=[0,0,0],s=Number.POSITIVE_INFINITY;return this.vertexList.map((function(h){var p=o._distVertex(h,[t,e,i]);s>p&&(s=p,r=n([],h,!0))})),r},t}();return e})()));
//# sourceMappingURL=p5.bezier.min.js.map