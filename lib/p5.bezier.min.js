/*! For license information please see p5.bezier.min.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.p5bezier=t():e.p5bezier=t()}(this,(()=>(()=>{"use strict";var e={d:(t,r)=>{for(var i in r)e.o(r,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:r[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{initBezier:()=>m,newBezier:()=>E,newBezierObj:()=>P});var r=function(e,t,r){if(r||2===arguments.length)for(var i,n=0,o=t.length;n<o;n++)!i&&n in t||(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))};window.console.log("[p5.bezier]");var i,n,o,s,h,a,p,l,f,c=[.2,.1,.05,.04,.02,.01,.008,.002,.001,5e-4,1e-4],d=[1];function u(e,t){return"WebGLRenderingContext"===e.constructor.name||t?3:2}function v(e){for(var t=d.length;t<=e;t++)d[t]=t*d[t-1]}function y(e){return v(e),d[e]}function b(e,t){return v(e),y(e)/(y(t)*y(e-t))}function w(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 4===e.length?Math.hypot(e[0]-e[2],e[1]-e[3]):6===e.length?Math.hypot(e[0]-e[3],e[1]-e[4],e[2]-e[5]):0}function x(){i._doFill&&n.fill(),i._doStroke&&n.stroke()}function g(e){return e.map((function(e){return r([],e,!0)}))}function L(e){var t=e[0],r=e[e.length-1],i=e[1],n=e[e.length-2];return[[2*r[0]-n[0],2*r[1]-n[1]],[2*t[0]-i[0],2*t[1]-i[1]],t]}function m(e,t){if(void 0===t&&(t=!1),n=(i=e).drawingContext,"undefined"!=typeof p5&&e instanceof p5.Graphics)h=!0,o=u(n,!1);else{if(!("undefined"!=typeof p5&&e instanceof p5.Renderer||e.drawingContext))throw new Error("[p5.bezier] Canvas is not supported.");h=!1,"undefined"!=typeof p5&&("undefined"==typeof p5||e instanceof p5.Renderer)||window.console.warn("[p5.bezier] Support for non-p5 canvas is not tested."),o=u(n,e.isP3D)}!function(e,t,r){e?(a=t.beginShape,p=t.vertex,l=t.vertex,f=t.endShape):(a=r.beginPath.bind(r),p=r.moveTo.bind(r),l=r.lineTo.bind(r),f=r.closePath.bind(r))}(h,i,n),s=t}function E(e,t,r){if(void 0===t&&(t="OPEN"),void 0===r&&(r=7),s&&!Array.isArray(e))throw new Error("[p5.bezier] newBezier() function expects an array, got ".concat(typeof e,"."));if(e=g(e),"CLOSE"===t){var i=L(e);e.push.apply(e,i)}var n=c[r],d=e.length-1;if(0!==o){if(s)for(var u=0,y=e;u<y.length;u++){var w=y[u];if(!Array.isArray(e)||w.length!==o)throw new Error("[p5.bezier] One or more points in the array are not input correctly.")}if(v(d),a(),p.apply(void 0,e[0]),2===o){var m=void 0,E=void 0,P=void 0;for(P=0;P<=1;P+=n){m=E=0;for(var z=0;z<=d;z++){m+=(S=b(d,z)*Math.pow(1-P,d-z)*Math.pow(P,z))*e[z][0],E+=S*e[z][1]}l(m,E)}}else if(3===o){P=void 0;for(P=0;P<=1;P+=n){var O=[0,0,0];for(z=0;z<=d;z++)for(var S=b(d,z)*Math.pow(1-P,d-z)*Math.pow(P,z),M=0;M<3;M++)O[M]+=S*e[z][M];l.apply(void 0,O)}}if(l.apply(void 0,e.slice(-1)[0]),h)f(t);else if("CLOSE"===t)f();else if(s&&"OPEN"!==t)throw new Error("[p5.bezier] Close type error. A bezier curve can only be either OPEN or CLOSE.");x()}}function P(e,t,r){void 0===t&&(t="OPEN"),void 0===r&&(r=7);var i=c[r];if(s){if(!Array.isArray(e))throw new Error("[p5.bezier] newBezierObj() function expects an array, got ".concat(typeof e,"."));for(var n=0,h=e;n<h.length;n++){var a=h[n];if(!Array.isArray(a)||a.length!==o)throw new Error("[p5.bezier] One or more points in the array are not input correctly.")}}return new z(e,t,i,o)}var z=function(){function e(e,t,i,n,o){var h;if(void 0===o&&(o=null),s&&2!==n&&3!==n)throw new Error("[p5.bezier] Dimension error. The bezier curve is ".concat(n,"-dimensional and doesn't belong to our world."));if(this.controlPoints=g(e),"CLOSE"===t)(h=this.controlPoints).push.apply(h,L(this.controlPoints)),this.closeType="CLOSE";else{if("OPEN"!==t)throw new Error("[p5.bezier] Close type error. A bezier curve can only be either OPEN or CLOSE.");this.closeType="OPEN"}this.dimension=n,this.increment=i,this.vertexList=[],this.vertexListLen=0,this.p=this.controlPoints.length,this.n=this.p-1,v(this.n),null===o?this._buildVertexList():(this.vertexList=r([],o,!0),this.vertexListLen=this.vertexList.length)}return e.prototype._buildVertexList=function(){if(this.vertexList=[],2===this.dimension)for(var e=0;e<=1;e+=this.increment){for(var t=0,r=0,i=0;i<=this.n;i++){t+=(o=b(this.n,i)*Math.pow(1-e,this.n-i)*Math.pow(e,i))*this.controlPoints[i][0],r+=o*this.controlPoints[i][1]}this.vertexList.push([t,r])}else if(3===this.dimension)for(e=0;e<=1;e+=this.increment){var n=[0,0,0];for(i=0;i<=this.n;i++)for(var o=b(this.n,i)*Math.pow(1-e,this.n-i)*Math.pow(e,i),s=0;s<3;s++)n[s]+=o*this.controlPoints[i][s];this.vertexList.push(n)}return this._addVertex(this.controlPoints[this.controlPoints.length-1]),this.dimension=this.vertexList[0].length,this.vertexListLen=this.vertexList.length,this.vertexList},e.prototype._addVertex=function(e){if(2!==this.dimension&&3!==this.dimension)throw new Error("[p5.bezier] Vertices can only be in 2D or 3D space.");l.apply(void 0,e)},e.prototype._distVertex=function(e,t){return 2===this.dimension?w(e[0],e[1],t[0],t[1]):3===this.dimension?w(e[0],e[1],e[2],t[0],t[1],t[2]):0},e.prototype.draw=function(e){if(e){if(!(Array.isArray(e)&&2===e.length&&this.increment<=.008))throw this.increment>.008?new Error("[p5.bezier] Fidelity is too low for a dash line. It should be at least 6."):new Error("[p5.bezier] Your dash array input is not valid. Make sure it's an array of two numbers.");var t=Math.abs(e[0]),r=t+Math.abs(e[1]),i=0,o=0,s=this.vertexList[0],l=!0;n.save(),n.fillStyle="rgba(0, 0, 0, 0)",a(),p.apply(void 0,this.vertexList[0]);for(u=1;u<this.vertexListLen;u++)(o=(i+=this._distVertex(s,this.vertexList[u]))%r)<=t&&l?this._addVertex(this.vertexList[u]):o>t&&o<=r&&l?l=!1:o<=t&&!l&&(p.apply(void 0,this.vertexList[u]),l=!0),s=this.vertexList[u];x(),n.restore()}else{a();for(var c=0,d=this.vertexList;c<d.length;c++){var u=d[c];this._addVertex(u)}"CLOSE"===this.closeType&&n.closePath(),h?f(this.closeType):"CLOSE"===this.closeType&&f(),x()}},e.prototype.update=function(e){if(e.length!==this.controlPoints.length)throw new Error("[p5.bezier] The number of points changed. (Keep the length of the point array the same.)");this.controlPoints.every((function(t,r){return t===e[r]}))||(this.controlPoints=e,this._buildVertexList())},e.prototype.move=function(t,r,i,n,o){if(void 0===i&&(i=null),void 0===n&&(n=!0),void 0===o&&(o=[0]),null===i&&3===this.dimension)throw new Error("[p5.bezier] To move a 3D curve, please specify (x, y, z).");var s=[t,r];null!==i&&s.push(i);var h=this.vertexList.map((function(e){return e.slice()})),a=new e(this.controlPoints,this.closeType,this.increment,this.dimension,h);return a.vertexList=a.vertexList.map((function(e){return e.map((function(e,t){return e+s[t]}))})),n&&a.draw(o),a},e.prototype.shortest=function(e,t,r){void 0===r&&(r=0);for(var i=[],n=1/0,o=0,s=this.vertexList;o<s.length;o++){var h=s[o],a=this._distVertex(h,[e,t,r]);n>a&&(n=a,i=h)}return i},e}();return t})()));
//# sourceMappingURL=p5.bezier.min.js.map