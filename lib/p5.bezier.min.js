/*! For license information please see p5.bezier.min.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.p5bezier=e():t.p5bezier=e()}(this,(()=>(()=>{"use strict";var t={d:(e,i)=>{for(var n in i)t.o(i,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:i[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{initBezier:()=>L,newBezier:()=>P,newBezierObj:()=>S});var i=function(t,e,i){if(i||2===arguments.length)for(var n,o=0,r=e.length;o<r;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};window.console.log("[p5.bezier]");var n,o,r,s,h,p,l,a,d={0:.2,1:.1,2:.05,3:.04,4:.02,5:.01,6:.008,7:.002,8:.001,9:5e-4,10:1e-4},c=[1],f={};function u(t,e){return"WebGLRenderingContext"===t.constructor.name||e?3:2}function v(t){for(var e=c.length;e<=t;e++)c[e]=e*c[e-1]}function y(t){return c[t]}function x(t,e){return 0===e||e===t?1:(f[t]||(f[t]={}),void 0!==f[t][e]||(f[t][e]=function(t,e){return y(t)/(y(e)*y(t-e))}(t,e)),f[t][e])}function b(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 4===t.length?Math.hypot(t[0]-t[2],t[1]-t[3]):6===t.length?Math.hypot(t[0]-t[3],t[1]-t[4],t[2]-t[5]):0}function g(){n._doFill&&o.fill(),n._doStroke&&o.stroke()}function m(t){return t.map((function(t){return Array.from(t)}))}function w(t){var e=t[0],i=t[t.length-1],n=t[1],o=t[t.length-2];return[[2*i[0]-o[0],2*i[1]-o[1]],[2*e[0]-n[0],2*e[1]-n[1]],e]}function L(t){if(o=(n=t).drawingContext,"undefined"!=typeof p5&&t instanceof p5.Graphics)s=!0,r=u(o,!1);else{if(!("undefined"!=typeof p5&&t instanceof p5.Renderer||t.drawingContext))throw new Error("[p5.bezier] Canvas is not supported.");s=!1,"undefined"!=typeof p5&&("undefined"==typeof p5||t instanceof p5.Renderer)||window.console.warn("[p5.bezier] Support beyond p5.js is not tested."),r=u(o,t.isP3D)}!function(t,e,i){t?(h=e.beginShape,p=e.vertex,l=e.vertex,a=e.endShape):(h=i.beginPath.bind(i),p=i.moveTo.bind(i),l=i.lineTo.bind(i),a=i.closePath.bind(i))}(s,n,o)}function P(t,e,i){if(void 0===e&&(e="OPEN"),void 0===i&&(i=7),t=m(t),"CLOSE"===e){var n=w(t);t.push.apply(t,n)}var o=d[i],c=t.length-1;if(v(c),h(),p.apply(void 0,t[0]),2===r){var f=void 0,u=void 0,y=void 0;for(y=0;y<=1;y+=o){f=u=0;for(var b=0;b<=c;b++){f+=(P=x(c,b)*Math.pow(1-y,c-b)*Math.pow(y,b))*t[b][0],u+=P*t[b][1]}l(f,u)}}else if(3===r){y=void 0;for(y=0;y<=1;y+=o){var L=[0,0,0];for(b=0;b<=c;b++)for(var P=x(c,b)*Math.pow(1-y,c-b)*Math.pow(y,b),S=0;S<3;S++)L[S]+=P*t[b][S];l.apply(void 0,L)}}l.apply(void 0,t.slice(-1)[0]),s?a(e):"CLOSE"===e&&a(),g()}function S(t,e,i){void 0===e&&(e="OPEN"),void 0===i&&(i=7);var n=d[i];return new O(t,e,n,r)}v(10);var O=function(){function t(t,e,n,o,r){var s;void 0===r&&(r=null),this.controlPoints=m(t),"CLOSE"===e?((s=this.controlPoints).push.apply(s,w(this.controlPoints)),this.closeType="CLOSE"):this.closeType="OPEN",this.dimension=o,this.increment=n,this.vertexList=[],this.p=this.controlPoints.length,this.n=this.p-1,v(this.n),null===r?this._buildVertexList():this.vertexList=i([],r,!0)}return t.prototype._buildVertexList=function(){if(this.vertexList=[],2===this.dimension)for(var t=0;t<=1;t+=this.increment){for(var e=0,i=0,n=0;n<=this.n;n++){e+=(r=x(this.n,n)*Math.pow(1-t,this.n-n)*Math.pow(t,n))*this.controlPoints[n][0],i+=r*this.controlPoints[n][1]}this.vertexList.push([e,i])}else if(3===this.dimension)for(t=0;t<=1;t+=this.increment){var o=[0,0,0];for(n=0;n<=this.n;n++)for(var r=x(this.n,n)*Math.pow(1-t,this.n-n)*Math.pow(t,n),s=0;s<3;s++)o[s]+=r*this.controlPoints[n][s];this.vertexList.push(o)}return this._addVertex(this.controlPoints[this.controlPoints.length-1]),this.dimension=this.vertexList[0].length,this.vertexList},t.prototype._addVertex=function(t){l.apply(void 0,t)},t.prototype._distVertex=function(t,e){return 3===this.dimension&&3===t.length&&3===e.length?b(t[0],t[1],t[2],e[0],e[1],e[2]):2===this.dimension?b(t[0],t[1],e[0],e[1]):0},t.prototype.draw=function(t){var e,i,n,r=this;if(t){this.increment>.008&&(this.increment=.008);var d=Math.abs(t[0]),c=Math.abs(t[1]),f=!0,u=this.vertexList[0],v=1,y=this.vertexList[v],x=u,b=0,m=f?d:c;for(o.save(),o.fillStyle="rgba(0, 0, 0, 0)",h(),p.apply(void 0,u);v<this.vertexList.length;){for(y=this.vertexList[v],b=this._distVertex(u,y);b>=m;)i=y,n=m/b,x=2===(e=x).length&&2===i.length?[e[0]+(i[0]-e[0])*n,e[1]+(i[1]-e[1])*n]:3===e.length&&3===i.length?[e[0]+(i[0]-e[0])*n,e[1]+(i[1]-e[1])*n,e[2]+(i[2]-e[2])*n]:i,f?l.apply(void 0,x):p.apply(void 0,x),b-=m,m=(f=!f)?d:c;f?l.apply(void 0,y):p.apply(void 0,y),m-=this._distVertex(x,y),x=u=y,v++}g(),o.restore()}else h(),this.vertexList.map((function(t){return r._addVertex(t)})),"CLOSE"===this.closeType&&o.closePath(),s?a(this.closeType):"CLOSE"===this.closeType&&a(),g()},t.prototype.update=function(t){if(t.length!==this.controlPoints.length)throw new Error("[p5.bezier] The number of control points changed.");this.controlPoints.every((function(e,i){return e===t[i]}))||(this.controlPoints=t,this._buildVertexList())},t.prototype.move=function(e,i,n,o,r){if(void 0===n&&(n=null),void 0===o&&(o=!0),null===n&&3===this.dimension)throw new Error("[p5.bezier] X, Y, and Z are needed to move a 3D curve.");var s=[e,i];null!==n&&s.push(n);var h=this.vertexList.map((function(t){return t.slice()})),p=new t(this.controlPoints,this.closeType,this.increment,this.dimension,h);return p.vertexList=p.vertexList.map((function(t){return t.map((function(t,e){return t+s[e]}))})),o&&p.draw(r),p},t.prototype.shortest=function(t,e,n){var o=this;void 0===n&&(n=0);var r=[0,0,0],s=1/0;return this.vertexList.map((function(h){var p=o._distVertex(h,[t,e,n]);s>p&&(s=p,r=i([],h,!0))})),r},t}();return e})()));
//# sourceMappingURL=p5.bezier.min.js.map