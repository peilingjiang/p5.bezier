/*! For license information please see p5.bezier.min.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.p5bezier=e():t.p5bezier=e()}(this,(()=>(()=>{"use strict";var t={d:(e,n)=>{for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};t.d(e,{default:()=>x});var n={1:.1,2:.005,3:.001,4:5e-4,5:2e-4},i=[1],o={};function r(t){return i[t]}function s(t,e){return 0===e||e===t?1:o[t][e]}!function(t){for(var e=i.length;e<=t;e++)i[e]=e*i[e-1]}(150),function(t){for(var e=2;e<=t;e++){o[e]={};for(var n=1;n<e;n++)o[e][n]=r(e)/(r(n)*r(e-n))}}(150);var a={canvas:null,ctx:null,dimension:2,useP5:!0,beginPath:function(){},moveTo:function(){},lineTo:function(){},closePath:function(){}};function c(t,e){return"WebGLRenderingContext"===t.constructor.name||e?3:2}function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.length;if(4===n){var i=t[0]-t[2],o=t[1]-t[3];return Math.sqrt(i*i+o*o)}if(6===n){i=t[0]-t[3],o=t[1]-t[4];var r=t[2]-t[5];return Math.sqrt(i*i+o*o+r*r)}return 0}function h(){a.canvas._doFill&&a.ctx.fill(),a.canvas._doStroke&&a.ctx.stroke()}function u(t){return t.map((function(t){return t.slice()}))}function p(t){var e=t.length,n=t[0],i=t[e-1],o=t[1],r=t[e-2];return[[2*i[0]-r[0],2*i[1]-r[1]],[2*n[0]-o[0],2*n[1]-o[1]],n]}var f=function(t,e,n){if(n||2===arguments.length)for(var i,o=0,r=e.length;o<r;o++)!i&&o in e||(i||(i=Array.prototype.slice.call(e,0,o)),i[o]=e[o]);return t.concat(i||Array.prototype.slice.call(e))};function d(t,e,n,i){for(var o=new Array(i).fill(0),r=1-n,a=0;a<=e;a++)for(var c=s(e,a)*Math.pow(r,e-a)*Math.pow(n,a),l=0;l<i;l++)o[l]+=c*t[a][l];return o}window.console.log("[p5.bezier] ".concat("0.6.0"));var v=function(){function t(t,e,n,i,o){var r;void 0===o&&(o=null),this.controlPoints=u(t),"CLOSE"===e?((r=this.controlPoints).push.apply(r,p(this.controlPoints)),this.closeType="CLOSE"):this.closeType="OPEN",this.dimension=i,this.increment=n,this.vertexList=[],this.p=this.controlPoints.length,this.n=this.p-1,null===o?this._buildVertexList():this.vertexList=f([],o,!0)}return t.prototype._buildVertexList=function(){this.vertexList=[];for(var t=0;t<=1;t+=this.increment){var e=d(this.controlPoints,this.n,t,this.dimension);this.vertexList.push(e)}return this._addVertex(this.controlPoints[this.controlPoints.length-1]),this.dimension=this.vertexList[0].length,this.vertexList},t.prototype._addVertex=function(t){a.lineTo.apply(a,t)},t.prototype._distVertex=function(t,e){return 3===this.dimension&&3===t.length&&3===e.length?l(t[0],t[1],t[2],e[0],e[1],e[2]):2===this.dimension?l(t[0],t[1],e[0],e[1]):0},t.prototype.draw=function(t){t?this._dashedCurve(t):this._solidCurve()},t.prototype._solidCurve=function(){var t=this;a.beginPath(),this.vertexList.map((function(e){return t._addVertex(e)})),"CLOSE"===this.closeType&&a.closePath(),a.useP5?a.closePath(this.closeType):"CLOSE"===this.closeType&&a.closePath(),h()},t.prototype._dashedCurve=function(t){this.increment>.008&&(this.increment=.008,window.console.warn("[p5.bezier] Accuracy is changed to 6 for a dash curve"));var e,n,i,o,r,s=t.map(Math.abs),c=s[0],l=s[1],u=!0,p=this.vertexList[0],f=1,d=p,v=0,x=c;for(a.ctx.save(),a.ctx.fillStyle="rgba(0, 0, 0, 0)",a.beginPath(),a.moveTo.apply(a,p);f<this.vertexList.length;){var y=this.vertexList[f];for(v=this._distVertex(p,y);v>=x;)n=y,i=x/v,o=void 0,r=void 0,o=(e=d).length,r=n.length,d=2===o&&2===r?[e[0]+(n[0]-e[0])*i,e[1]+(n[1]-e[1])*i]:3===o&&3===r?[e[0]+(n[0]-e[0])*i,e[1]+(n[1]-e[1])*i,e[2]+(n[2]-e[2])*i]:n,u?a.lineTo.apply(a,d):a.moveTo.apply(a,d),v-=x,x=(u=!u)?c:l;u?a.lineTo.apply(a,y):a.moveTo.apply(a,y),x-=this._distVertex(d,y),d=p=y,f++}h(),a.ctx.restore()},t.prototype.update=function(t){if(t.length!==this.controlPoints.length)throw new Error("[p5.bezier] The number of control points changed");this.controlPoints.every((function(e,n){return e===t[n]}))||(this.controlPoints=t,this._buildVertexList())},t.prototype.move=function(e,n,i,o,r){if(void 0===i&&(i=null),void 0===o&&(o=!0),null===i&&3===this.dimension)throw new Error("[p5.bezier] X, Y, and Z are needed to move a 3D curve");var s=[e,n];null!==i&&s.push(i);var a=this.vertexList.map((function(t){return t.slice()})),c=new t(this.controlPoints,this.closeType,this.increment,this.dimension,a);return c.vertexList=c.vertexList.map((function(t){return t.map((function(t,e){return t+s[e]}))})),o&&c.draw(r),c},t.prototype.shortest=function(t,e,n){var i=this;void 0===n&&(n=0);var o=[0,0,0],r=Number.POSITIVE_INFINITY;return this.vertexList.map((function(s){var a=i._distVertex(s,[t,e,n]);r>a&&(r=a,o=f([],s,!0))})),o},t}();const x={init:function(t){if(a.canvas=t,a.ctx=a.canvas.drawingContext,"undefined"!=typeof p5&&t instanceof p5.Graphics)a.useP5=!0,a.dimension=c(a.ctx,!1);else{if(!("undefined"!=typeof p5&&t instanceof p5.Renderer||t.drawingContext))throw new Error("[p5.bezier] Canvas is not supported");a.useP5=!1,"undefined"!=typeof p5&&("undefined"==typeof p5||t instanceof p5.Renderer)||window.console.warn("[p5.bezier] Support beyond p5.js is not tested"),a.dimension=c(a.ctx,t.isP3D)}!function(t,e,n){t?(a.beginPath=e.beginShape,a.moveTo=e.vertex,a.lineTo=e.vertex,a.closePath=e.endShape):n instanceof WebGLRenderingContext?(a.beginPath=function(){},a.moveTo=function(t,e,i){return void 0===i&&(i=0),n.vertexAttrib3f(0,t,e,i)},a.lineTo=function(t,e,i){return void 0===i&&(i=0),n.vertexAttrib3f(0,t,e,i)},a.closePath=function(){}):(a.beginPath=n.beginPath.bind(n),a.moveTo=n.moveTo.bind(n),a.lineTo=n.lineTo.bind(n),a.closePath=n.closePath.bind(n))}(a.useP5,a.canvas,a.ctx)},draw:function(t,e,i){void 0===e&&(e="OPEN"),void 0===i&&(i=3);var o=u(t);if("CLOSE"===e){var r=p(o);o.push.apply(o,r)}a.beginPath(),a.moveTo.apply(a,o[0]),function(t,e){for(var i=t.length-1,o=n[e],r=0;r<=1;r+=o){var s=d(t,i,r,a.dimension);a.lineTo.apply(a,s)}}(o,i),a.lineTo.apply(a,o[o.length-1]),a.useP5?a.closePath(e):"CLOSE"===e&&a.closePath(),h()},new:function(t,e,i){void 0===e&&(e="OPEN"),void 0===i&&(i=3);var o=n[i];return new v(t,e,o,a.dimension)}};return e=e.default})()));
//# sourceMappingURL=p5.bezier.min.js.map