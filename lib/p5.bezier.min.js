/*! For license information please see p5.bezier.min.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.p5bezier=e():t.p5bezier=e()}(this,(()=>(()=>{"use strict";var t={d:(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{default:()=>y});var n={1:.1,2:.005,3:.001,4:5e-4,5:2e-4},o=[1],i={};function r(t){return o[t]}function s(t,e){return 0===e||e===t?1:i[t][e]}!function(t){for(var e=o.length;e<=t;e++)o[e]=e*o[e-1]}(150),function(t){for(var e=2;e<=t;e++){i[e]={};for(var n=1;n<e;n++)i[e][n]=r(e)/(r(n)*r(e-n))}}(150);var a={canvas:null,ctx:null,dimension:2,useP5:!0,beginPath:function(){},moveTo:function(){},lineTo:function(){},closePath:function(){}};function c(t,e){return"WebGLRenderingContext"===t.constructor.name||e?3:2}function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.length;if(4===n){var o=t[0]-t[2],i=t[1]-t[3];return Math.sqrt(o*o+i*i)}if(6===n){o=t[0]-t[3],i=t[1]-t[4];var r=t[2]-t[5];return Math.sqrt(o*o+i*i+r*r)}return 0}function u(){a.canvas._doFill&&a.ctx.fill(),a.canvas._doStroke&&a.ctx.stroke()}function h(t){return t.map((function(t){return t.slice()}))}function p(t){var e=t.length,n=t[0],o=t[e-1],i=t[1],r=t[e-2];return[[2*o[0]-r[0],2*o[1]-r[1]],[2*n[0]-i[0],2*n[1]-i[1]],n]}var d=function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))};function f(t,e,n,o){for(var i=new Array(o).fill(0),r=1-n,a=0;a<=e;a++)for(var c=s(e,a)*Math.pow(r,e-a)*Math.pow(n,a),l=0;l<o;l++)i[l]+=c*t[a][l];return i}window.console.log("[p5.bezier] ".concat("0.6.0"));var v=function(){function t(t,e,n,o,i){var r;void 0===i&&(i=null),this.controlPoints=h(t),"CLOSE"===e?((r=this.controlPoints).push.apply(r,p(this.controlPoints)),this.closeType="CLOSE"):this.closeType="OPEN",this.dimension=o,this.increment=n,this.vertexList=[],this.p=this.controlPoints.length,this.n=this.p-1,null===i?this._buildVertexList():this.vertexList=d([],i,!0)}return t.prototype._buildVertexList=function(){this.vertexList=[];for(var t=0;t<=1;t+=this.increment){var e=f(this.controlPoints,this.n,t,this.dimension);this.vertexList.push(e)}return this._addVertex(this.controlPoints[this.controlPoints.length-1]),this.dimension=this.vertexList[0].length,this.vertexList},t.prototype._addVertex=function(t){a.lineTo.apply(a,t)},t.prototype._distVertex=function(t,e){return 3===this.dimension&&3===t.length&&3===e.length?l(t[0],t[1],t[2],e[0],e[1],e[2]):2===this.dimension?l(t[0],t[1],e[0],e[1]):0},t.prototype.draw=function(t){t?this._dashedCurve(t):this._solidCurve()},t.prototype._solidCurve=function(){var t=this;a.beginPath(),this.vertexList.map((function(e){return t._addVertex(e)})),"CLOSE"===this.closeType&&a.closePath(),a.useP5?a.closePath(this.closeType):"CLOSE"===this.closeType&&a.closePath(),u()},t.prototype._dashedCurve=function(t){this.increment>.008&&(this.increment=.008,window.console.warn("[p5.bezier] Accuracy is changed to 6 for a dash curve"));var e,n,o,i,r,s=t.map(Math.abs),c=s[0],l=s[1],h=!0,p=this.vertexList[0],d=1,f=p,v=0,y=c;for(a.ctx.save(),a.ctx.fillStyle="rgba(0, 0, 0, 0)",a.beginPath(),a.moveTo.apply(a,p);d<this.vertexList.length;){var x=this.vertexList[d];for(v=this._distVertex(p,x);v>=y;)n=x,o=y/v,i=void 0,r=void 0,i=(e=f).length,r=n.length,f=2===i&&2===r?[e[0]+(n[0]-e[0])*o,e[1]+(n[1]-e[1])*o]:3===i&&3===r?[e[0]+(n[0]-e[0])*o,e[1]+(n[1]-e[1])*o,e[2]+(n[2]-e[2])*o]:n,h?a.lineTo.apply(a,f):a.moveTo.apply(a,f),v-=y,y=(h=!h)?c:l;h?a.lineTo.apply(a,x):a.moveTo.apply(a,x),y-=this._distVertex(f,x),f=p=x,d++}u(),a.ctx.restore()},t.prototype.update=function(t){if(t.length!==this.controlPoints.length)throw new Error("[p5.bezier] The number of control points changed");this.controlPoints.every((function(e,n){return e===t[n]}))||(this.controlPoints=t,this._buildVertexList())},t.prototype.move=function(e,n,o,i,r){if(void 0===o&&(o=null),void 0===i&&(i=!0),null===o&&3===this.dimension)throw new Error("[p5.bezier] X, Y, and Z are needed to move a 3D curve");var s=[e,n];null!==o&&s.push(o);var a=this.vertexList.map((function(t){return t.slice()})),c=new t(this.controlPoints,this.closeType,this.increment,this.dimension,a);return c.vertexList=c.vertexList.map((function(t){return t.map((function(t,e){return t+s[e]}))})),i&&c.draw(r),c},t.prototype.shortest=function(t,e,n){var o=this;void 0===n&&(n=0);var i=[0,0,0],r=Number.POSITIVE_INFINITY;return this.vertexList.map((function(s){var a=o._distVertex(s,[t,e,n]);r>a&&(r=a,i=d([],s,!0))})),i},t}();const y={init:function(t){if(a.canvas=t,a.ctx=a.canvas.drawingContext,"undefined"!=typeof p5&&t instanceof p5.Graphics)a.useP5=!0,a.dimension=c(a.ctx,!1);else{if(!("undefined"!=typeof p5&&t instanceof p5.Renderer||t.drawingContext))throw new Error("[p5.bezier] Canvas is not supported");a.useP5=!1,"undefined"!=typeof p5&&("undefined"==typeof p5||t instanceof p5.Renderer)||window.console.warn("[p5.bezier] Support beyond p5.js is not tested"),a.dimension=c(a.ctx,t.isP3D)}!function(t,e,n){t?(a.beginPath=e.beginShape,a.moveTo=e.vertex,a.lineTo=e.vertex,a.closePath=e.endShape):n instanceof WebGLRenderingContext?(a.beginPath=function(){},a.moveTo=function(t,e,o){return void 0===o&&(o=0),n.vertexAttrib3f(0,t,e,o)},a.lineTo=function(t,e,o){return void 0===o&&(o=0),n.vertexAttrib3f(0,t,e,o)},a.closePath=function(){}):(a.beginPath=n.beginPath.bind(n),a.moveTo=n.moveTo.bind(n),a.lineTo=n.lineTo.bind(n),a.closePath=n.closePath.bind(n))}(a.useP5,a.canvas,a.ctx)},draw:function(t,e,o){void 0===e&&(e="OPEN"),void 0===o&&(o=3);var i=h(t);if("CLOSE"===e){var r=p(i);i.push.apply(i,r)}a.beginPath(),a.moveTo.apply(a,i[0]),function(t,e){for(var o=t.length-1,i=n[e],r=0;r<=1;r+=i){var s=f(t,o,r,a.dimension);a.lineTo.apply(a,s)}}(i,o),a.lineTo.apply(a,i[i.length-1]),a.useP5?a.closePath(e):"CLOSE"===e&&a.closePath(),u()},new:function(t,e,o){void 0===e&&(e="OPEN"),void 0===o&&(o=3);var i=n[o];return new v(t,e,i,a.dimension)}};return e})()));
//# sourceMappingURL=p5.bezier.min.js.map