/*! For license information please see p5.bezier.min.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.p5bezier=e():t.p5bezier=e()}(this,(()=>(()=>{"use strict";var t={d:(e,n)=>{for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};t.d(e,{default:()=>b});var n=160,i={1:.1,2:.005,3:.001,4:5e-4,5:2e-4},o=[1],r={};function s(t){return o[t]}function a(t,e){return 0===e||e===t?1:r[t][e]}!function(t){for(var e=o.length;e<=t;e++)o[e]=e*o[e-1]}(n+1),function(t){for(var e=2;e<=t;e++){r[e]={};for(var n=1;n<e;n++)r[e][n]=s(e)/(s(n)*s(e-n))}}(n+1);var c=function(t,e,n){if(n||2===arguments.length)for(var i,o=0,r=e.length;o<r;o++)!i&&o in e||(i||(i=Array.prototype.slice.call(e,0,o)),i[o]=e[o]);return t.concat(i||Array.prototype.slice.call(e))},h={canvas:null,ctx:null,dimension:2,useP5:!0,beginPath:function(){},moveTo:function(){},lineTo:function(){},closePath:function(){}};function u(t,e){return"WebGLRenderingContext"===t.constructor.name||e?3:2}function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.length;if(4===n){var i=t[0]-t[2],o=t[1]-t[3];return Math.sqrt(i*i+o*o)}if(6===n){i=t[0]-t[3],o=t[1]-t[4];var r=t[2]-t[5];return Math.sqrt(i*i+o*o+r*r)}return 0}function p(){h.canvas._doFill&&h.ctx.fill(),h.canvas._doStroke&&h.ctx.stroke()}var f=function(){function t(t){this.m=Math.pow(2,31)-1,this.a=1103515245,this.c=12345,this.state=t}return t.prototype.r=function(){return this.state=(this.a*this.state+this.c)%this.m,this.state/this.m},t.prototype.next=function(t,e){return Math.floor(this.r()*(e-t+1))+t},t}(),v=1234;function d(t,e){void 0===e&&(e=!1);var i=n-(e?3:0);if(t.length<=i)return y(t);var o=t.length-i,r=new f(v),s=new Set;return c([],new Array(o),!0).map((function(t,e){for(var n=r.next(5+e,i-5+e);s.has(n);)n=r.next(5+e,i-5+e);s.add(n)})),y(t.filter((function(t,e){return!s.has(e)})))}function y(t){return t.map((function(t){return t.slice()}))}function x(t){var e=t.length;if(0===e)return[];var n=t[0],i=t[e-1];if(1===e)return y([n]);var o=t[1],r=t[e-2];return y([[2*i[0]-r[0],2*i[1]-r[1]],[2*n[0]-o[0],2*n[1]-o[1]],n])}var m=function(t,e,n){if(n||2===arguments.length)for(var i,o=0,r=e.length;o<r;o++)!i&&o in e||(i||(i=Array.prototype.slice.call(e,0,o)),i[o]=e[o]);return t.concat(i||Array.prototype.slice.call(e))};function P(t,e,n,i){for(var o=new Array(i).fill(0),r=1-n,s=0;s<=e;s++)for(var c=a(e,s)*Math.pow(r,e-s)*Math.pow(n,s),h=0;h<i;h++)o[h]+=c*t[s][h];return o}window.console.log("[p5.bezier] ".concat("0.6.0"));var g=function(){function t(t,e,n,i,o){var r;void 0===o&&(o=null),this.controlPoints=d(t,"CLOSE"===e),"CLOSE"===e?((r=this.controlPoints).push.apply(r,x(this.controlPoints)),this.closeType="CLOSE"):this.closeType="OPEN",this.dimension=i,this.increment=n,this.vertexList=[],this.p=this.controlPoints.length,this.n=this.p-1,null===o?this._buildVertexList():this.vertexList=m([],o,!0)}return t.prototype._buildVertexList=function(){this.vertexList=[];for(var t=0;t<=1;t+=this.increment){var e=P(this.controlPoints,this.n,t,this.dimension);this.vertexList.push(e)}return this._addVertex(this.controlPoints[this.controlPoints.length-1]),this.dimension=this.vertexList[0].length,this.vertexList},t.prototype._addVertex=function(t){h.lineTo.apply(h,t)},t.prototype._distVertex=function(t,e){return 3===this.dimension&&3===t.length&&3===e.length?l(t[0],t[1],t[2],e[0],e[1],e[2]):2===this.dimension?l(t[0],t[1],e[0],e[1]):0},t.prototype.draw=function(t){t?this._dashedCurve(t):this._solidCurve()},t.prototype._solidCurve=function(){var t=this;h.beginPath(),this.vertexList.map((function(e){return t._addVertex(e)})),"CLOSE"===this.closeType&&h.closePath(),h.useP5?h.closePath(this.closeType):"CLOSE"===this.closeType&&h.closePath(),p()},t.prototype._dashedCurve=function(t){this.increment>.008&&(this.increment=.008,window.console.warn("[p5.bezier] Accuracy is changed to 6 for a dash curve"));var e,n,i,o,r,s=t.map(Math.abs),a=s[0],c=s[1],u=!0,l=this.vertexList[0],f=1,v=l,d=0,y=a;for(h.ctx.save(),h.ctx.fillStyle="rgba(0, 0, 0, 0)",h.beginPath(),h.moveTo.apply(h,l);f<this.vertexList.length;){var x=this.vertexList[f];for(d=this._distVertex(l,x);d>=y;)n=x,i=y/d,o=void 0,r=void 0,o=(e=v).length,r=n.length,v=2===o&&2===r?[e[0]+(n[0]-e[0])*i,e[1]+(n[1]-e[1])*i]:3===o&&3===r?[e[0]+(n[0]-e[0])*i,e[1]+(n[1]-e[1])*i,e[2]+(n[2]-e[2])*i]:n,u?h.lineTo.apply(h,v):h.moveTo.apply(h,v),d-=y,y=(u=!u)?a:c;u?h.lineTo.apply(h,x):h.moveTo.apply(h,x),y-=this._distVertex(v,x),v=l=x,f++}p(),h.ctx.restore()},t.prototype.update=function(t){if(t.length!==this.controlPoints.length)throw new Error("[p5.bezier] The number of control points changed");this.controlPoints.every((function(e,n){return e===t[n]}))||(this.controlPoints=t,this._buildVertexList())},t.prototype.move=function(e,n,i,o,r){if(void 0===i&&(i=null),void 0===o&&(o=!0),null===i&&3===this.dimension)throw new Error("[p5.bezier] X, Y, and Z are needed to move a 3D curve");var s=[e,n];null!==i&&s.push(i);var a=this.vertexList.map((function(t){return t.slice()})),c=new t(this.controlPoints,this.closeType,this.increment,this.dimension,a);return c.vertexList=c.vertexList.map((function(t){return t.map((function(t,e){return t+s[e]}))})),o&&c.draw(r),c},t.prototype.shortest=function(t,e,n){var i=this;void 0===n&&(n=0);var o=[0,0,0],r=Number.POSITIVE_INFINITY;return this.vertexList.map((function(s){var a=i._distVertex(s,[t,e,n]);r>a&&(r=a,o=m([],s,!0))})),o},t}();const b={init:function(t){if(h.canvas=t,h.ctx=h.canvas.drawingContext,"undefined"!=typeof p5&&t instanceof p5.Graphics)h.useP5=!0,h.dimension=u(h.ctx,!1);else{if(!("undefined"!=typeof p5&&t instanceof p5.Renderer||t.drawingContext))throw new Error("[p5.bezier] Canvas is not supported");h.useP5=!1,"undefined"!=typeof p5&&("undefined"==typeof p5||t instanceof p5.Renderer)||window.console.warn("[p5.bezier] Support beyond p5.js is not tested"),h.dimension=u(h.ctx,t.isP3D)}!function(t,e,n){t?(h.beginPath=e.beginShape,h.moveTo=e.vertex,h.lineTo=e.vertex,h.closePath=e.endShape):n instanceof WebGLRenderingContext?(h.beginPath=function(){},h.moveTo=function(t,e,i){return void 0===i&&(i=0),n.vertexAttrib3f(0,t,e,i)},h.lineTo=function(t,e,i){return void 0===i&&(i=0),n.vertexAttrib3f(0,t,e,i)},h.closePath=function(){}):(h.beginPath=n.beginPath.bind(n),h.moveTo=n.moveTo.bind(n),h.lineTo=n.lineTo.bind(n),h.closePath=n.closePath.bind(n))}(h.useP5,h.canvas,h.ctx)},draw:function(t,e,n){void 0===e&&(e="OPEN"),void 0===n&&(n=3);var o="CLOSE"===e?m(m([],d(t,!0),!0),x(t),!0):d(t);return h.beginPath(),h.moveTo.apply(h,o[0]),function(t,e){for(var n=t.length-1,o=i[e],r=0;r<=1;r+=o){var s=P(t,n,r,h.dimension);h.lineTo.apply(h,s)}}(o,n),h.lineTo.apply(h,o[o.length-1]),h.useP5?h.closePath(e):"CLOSE"===e&&h.closePath(),p(),o},new:function(t,e,n){void 0===e&&(e="OPEN"),void 0===n&&(n=3);var o=i[n];return new g(t,e,o,h.dimension)}};return e=e.default})()));
//# sourceMappingURL=p5.bezier.min.js.map